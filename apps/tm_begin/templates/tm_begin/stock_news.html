{# templates/common/for_tm_begin/stock_news.html #}
{% extends 'common/base.html' %}
{% load static %}

{% block content %}
<div class="stock_news news-page">
  <h2>ğŸ“° Investing.com ìµœì‹  ë‰´ìŠ¤</h2>
  {% if updated_at %}
    <p class="inv-sub">ì—…ë°ì´íŠ¸: {{ updated_at|date:"Y-m-d H:i" }} (ì´ í˜ì´ì§€ {{ count }}ê±´ / ì´ {{ total }}ê±´)</p>
  {% endif %}

  {% if hero_item %}
    <!-- íˆì–´ë¡œ (ìƒë‹¨ 1ê°œ) -->
    <article class="inv-hero">
      <div class="inv-hero-img">
        <a href="{{ hero_item.link }}" target="_blank" rel="noopener">
          {% if hero_item.img %}
            <img src="{{ hero_item.img }}" alt="{{ hero_item.title|striptags }}">
          {% else %}
            <div class="no-image"><span>ğŸ“ˆ</span></div>
          {% endif %}
        </a>
      </div>
      <div class="inv-hero-content">
        <a href="{{ hero_item.link }}" target="_blank" rel="noopener" class="inv-title-lg">
          {{ hero_item.title|striptags }}
        </a>
        {% if hero_item.summary %}
          <p class="inv-desc inv-line-5">{{ hero_item.summary|striptags }}</p>
        {% endif %}
        <div class="inv-meta">
          <time>{{ hero_item.published }}</time>
          <span>{{ hero_item.source }}</span>
        </div>
      </div>
    </article>
  {% endif %}

  <!-- í•˜ë‹¨ ê·¸ë¦¬ë“œ(12ê°œ) -->
  <div class="inv-row">
    {% for item in grid_items %}
    <article class="inv-card">
      <a href="{{ item.link }}" target="_blank" rel="noopener" class="inv-thumb">
        {% if item.img %}
          <img src="{{ item.img }}" alt="{{ item.title|striptags }}">
        {% else %}
          <div class="no-image-small"><span>ğŸ“°</span></div>
        {% endif %}
      </a>

      <a href="{{ item.link }}" target="_blank" rel="noopener" class="inv-title inv-line-2">
        {{ item.title|striptags }}
      </a>

      {% if item.summary %}
        <p class="inv-desc inv-line-3">{{ item.summary|striptags }}</p>
      {% endif %}

      <div class="inv-meta">
        <time>{{ item.published }}</time>
        <span>{{ item.source }}</span>
      </div>
    </article>
    {% endfor %}
  </div>

  <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
  {% if total_pages > 1 %}
  <nav class="inv-pagination" aria-label="ë‰´ìŠ¤ í˜ì´ì§€">
    <a class="inv-page {% if not has_prev %}disabled{% endif %}" href="?page=1" aria-label="ì²« í˜ì´ì§€">Â«</a>
    <a class="inv-page {% if not has_prev %}disabled{% endif %}" href="?page={{ prev_page }}" aria-label="ì´ì „ í˜ì´ì§€">â€¹</a>

    {% for n in page_numbers %}
      {% if n == page %}
        <span class="inv-page active">{{ n }}</span>
      {% else %}
        <a class="inv-page" href="?page={{ n }}">{{ n }}</a>
      {% endif %}
    {% endfor %}

    <a class="inv-page {% if not has_next %}disabled{% endif %}" href="?page={{ next_page }}" aria-label="ë‹¤ìŒ í˜ì´ì§€">â€º</a>
    <a class="inv-page {% if not has_next %}disabled{% endif %}" href="?page={{ total_pages }}" aria-label="ë§ˆì§€ë§‰ í˜ì´ì§€">Â»</a>
  </nav>
  {% endif %}
</div>
{% endblock %}